<!--
This document is a testing environment for javascript function development.

For our purposes, the parser() function is the key component on this page.
Copy/Paste parser() into the front-end UX for use.

-->
<html>
<head>
	<title> Card ID Parsing Function </title>
	
	<style>
	 
	
	</style>
	
	
</head>
<body>

<script>

function runMagParser(){
	var rawData = document.getElementById('magStripeInput').value //.split(/\r?\n/);
	
	document.getElementById('magStripeOutput').value = magParser(rawData);
}


function magParser(rawData){

	var regexFull = /[%]([0-9]{16})\?([;+]\1\?([+]\1\?)?)?/;

	var result = regexFull.test(rawData);
	

	if(result){	//Full read on valid ID
		return "Good ID";
	}
	else{
		return "Regected";
	}

	return "end of function";
}

function runUinParser(){
	var rawData = document.getElementById('uinInput').value // .split(/\r?\n/);
	
	document.getElementById('uinOutput').value = uinParser(rawData);
}

function uinParser(rawData){

	var regexFull = /^[0-9]{3}00[0-9]{4}$/

	var result = regexFull.test(rawData);
	

	if(result){	//Full read on valid ID
		return "Good ID";
	}
	else{
		return "Regected";
	}

	return "end of function";
}

function runRfidParser(){
	var rawData = document.getElementById('rfidInput').value // .split(/\r?\n/);
	
	document.getElementById('rfidOutput').value = rfidParser(rawData);
}

function rfidParser(rawData){

	var regexFull = / / //Incomplete. Need dummy data

	var result = regexFull.test(rawData);
	

	if(result){	//Full read on valid ID
		return "Good ID";
	}

	else{
		return "Regected";
	}

	return "end of function";
}


</script>


<h1> Howdy! Enter raw card data, UINs, or RFID raw data in the boxes. </h1>

<!-- Magstripe -->
<div style="width: 100%; overflow: hidden;">
    <div style="width: 50%; float: left;">
    	Magstripe Raw Data<br>
    	<textarea rows="2" cols="30" id="magStripeInput">Write here</textarea>
    </div>
    <div style="width: 50%; float: right;">
    	Magstripe Output<br>
    	<textarea rows="2" cols="30" id="magStripeOutput"> </textarea>
    </div>
<button style=" top:50%; left:50%;" id="magStripeButton" onclick="runMagParser()"> Parse </button> <br>
</div>

<br>

<!-- UIN -->
<div style="width: 100%; overflow: hidden;">
    <div style="width: 50%; float: left;">
    	UIN<br>
    	<textarea rows="2" cols="30" id="uinInput">Write here</textarea>
    </div>
    <div style="width: 50%; float: right;">
    	UIN Output<br>
    	<textarea rows="2" cols="30" id="uinOutput"> </textarea>
    </div>
<button style=" top:50%; left:50%;" id="uinButton" onclick="runUinParser()"> Parse </button> <br>
</div>

<br>


<!-- RFID -->
<div style="width: 100%; overflow: hidden;">
    <div style="width: 50%; float: left;">
    	RFID<br>
    	<textarea rows="2" cols="30" id="rfidInput">Write here</textarea>
    </div>
    <div style="width: 50%; float: right;">
    	UIN Output<br>
    	<textarea rows="2" cols="30" id="rfidOutput"> </textarea>
    </div>
<button style=" top:50%; left:50%;" id="rfidButton" onclick="runRfidParser()"> Parse </button> <br>
</div>

<br>


</body>
</html>